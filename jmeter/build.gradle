apply plugin: 'java'

sourceCompatibility = 1.5
version = '1.0'

repositories {
    maven { url 'http://jcenter.bintray.com' }
    mavenCentral()
}

jar {
    manifest {
        attributes 'Implementation-Title': 'ExCache',
                'Implementation-Version': version
    }


}

task fatJar(type: Jar, dependsOn: compileJava ){

    manifest {  attributes 'Implementation-Title': 'jmeter sampler jar for Mache testing', 'Implementation-Version': version   }

    baseName = project.name + '-mache-plugin-all'

    from sourceSets.main.output.classesDir
    include '**/*.class'

    from project(':core-observable').sourceSets.main.output.classesDir
    include '**/*.class'

    from project(':core').sourceSets.main.output.classesDir
    include '**/*.class'

    from project(':mongo-ns').sourceSets.main.output.classesDir
    include '**/*.class'

    from project(':cassandra-ns').sourceSets.main.output.classesDir
    include '**/*.class'
}



dependencies {
    compile project(':core-observable')
    compile project(':core')
    compile project(':mongo-ns')
    compile project(':cassandra-ns')

    compile 'org.apache.jmeter:ApacheJMeter_java:2.11' // 2.11 and jcenter compiles ok

    testCompile group: 'junit', name: 'junit', version: '4.11'
}